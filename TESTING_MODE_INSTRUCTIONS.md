# üß™ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É

## ‚úÖ –í—Å—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–Ω—è—Ç–æ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### **–©–æ –∑–º—ñ–Ω–µ–Ω–æ:**

1. **–õ—ñ–º—ñ—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ–π:** `999,999` –∑–∞–º—ñ—Å—Ç—å `3` –Ω–∞ –¥–µ–Ω—å
2. **–õ—ñ–º—ñ—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:** `999,999` –∑–∞–º—ñ—Å—Ç—å `20` –Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—é
3. **–§—É–Ω–∫—Ü—ñ—è `canPerformAction`:** –ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `true`
4. **–°—Ç–∞–Ω–∏ `canGenerateStory` —Ç–∞ `canSendMessage`:** –ó–∞–≤–∂–¥–∏ `true`
5. **–õ—ñ—á–∏–ª—å–Ω–∏–∫–∏ `storiesRemaining` —Ç–∞ `messagesRemaining`:** –ó–∞–≤–∂–¥–∏ `999,999`
6. **–§—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ–∫–ª–∞–¥—É:** –î–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–±–µ–∑ –ø—ñ–¥–ø–∏—Å–∫–∏)

### **–Ø–∫ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏:**

#### **1. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —ñ—Å—Ç–æ—Ä—ñ–π:**
- –í—ñ–¥–∫—Ä–∏–π—Ç–µ **AI Mode** –∞–±–æ **Story Mode**
- –í–∏–±–µ—Ä—ñ—Ç—å –±—É–¥—å-—è–∫—É —Ç–µ–º—É —Ç–∞ —Ä—ñ–≤–µ–Ω—å
- –ì–µ–Ω–µ—Ä—É–π—Ç–µ —ñ—Å—Ç–æ—Ä—ñ—ó –±–µ–∑ –æ–±–º–µ–∂–µ–Ω—å
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –ø—Ä–æ –ª—ñ–º—ñ—Ç –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è

#### **2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤ AI —ñ—Å—Ç–æ—Ä—ñ—è—Ö:**
- –ó–∞–ø—É—Å—Ç—ñ—Ç—å AI —ñ—Å—Ç–æ—Ä—ñ—é
- –í—ñ–¥–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–µ–∑ –æ–±–º–µ–∂–µ–Ω—å
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –ª—ñ–º—ñ—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –Ω–µ –¥–æ—Å—è–≥–∞—î—Ç—å—Å—è

#### **3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∞–Ω–æ–Ω—ñ–º–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫ –±–µ–∑ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- –ì–µ–Ω–µ—Ä—É–π—Ç–µ —ñ—Å—Ç–æ—Ä—ñ—ó —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –ª—ñ–º—ñ—Ç–∏ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è

#### **4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
- –£–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç
- –¢–µ—Å—Ç—É–π—Ç–µ –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑ –æ–±–º–µ–∂–µ–Ω—å
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –ø—ñ–¥–ø–∏—Å–∫–∞ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞

#### **5. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó –ø–µ—Ä–µ–∫–ª–∞–¥—É:**
- –í—ñ–¥–∫—Ä–∏–π—Ç–µ AI —ñ—Å—Ç–æ—Ä—ñ—é
- –î–æ–≤–≥–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –ø–µ—Ä–µ–∫–ª–∞–¥ –ø—Ä–∞—Ü—é—î –¥–ª—è –≤—Å—ñ—Ö –º–æ–≤
- –ó–º—ñ–Ω—ñ—Ç—å –º–æ–≤—É –ø–µ—Ä–µ–∫–ª–∞–¥—É –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –ø–µ—Ä–µ–∫–ª–∞–¥ –¥–æ—Å—Ç—É–ø–Ω–∏–π –±–µ–∑ –ø—ñ–¥–ø–∏—Å–∫–∏

### **–õ–æ–≥–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è:**

–í –∫–æ–Ω—Å–æ–ª—ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
```
TESTING: Allowing action: generate_story
TESTING: Allowing action: send_message
```

#### **–õ–æ–≥–∏ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –ø–µ—Ä–µ–∫–ª–∞–¥—É:**
```
üé≠ Translation:
Input tokens: 45
Output tokens: 12
Cost: $0.000123
```

### **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö:**

–õ—ñ—á–∏–ª—å–Ω–∏–∫–∏ –≤—Å–µ —â–µ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –≤ Supabase:
- `stories_generated_today` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö —ñ—Å—Ç–æ—Ä—ñ–π
- `messages_sent_today` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### **–Ø–∫ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è:**

–ü—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–º—ñ–Ω—ñ—Ç—å –≤ `hooks/useLimits.ts`:

```typescript
// –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ –ª—ñ–º—ñ—Ç–∏
const FREE_LIMITS = {
  STORIES_PER_DAY: 3,
  MESSAGES_PER_STORY_PER_DAY: 20,
} as const;

// –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É –ª–æ–≥—ñ–∫—É canPerformAction
const canPerformAction = useCallback((action: 'generate_story' | 'send_message') => {
  switch (action) {
    case 'generate_story':
      return limits.canGenerateStory;
    case 'send_message':
      return limits.canSendMessage;
    default:
      return false;
  }
}, [limits.canGenerateStory, limits.canSendMessage]);
```

**–¢–∞–∫–æ–∂ –≤ `app/ai-story.tsx` —Ä–æ–∑–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ø—ñ–¥–ø–∏—Å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞–¥—É:**

```typescript
// Allow translation only for subscription
if (!limits.hasActiveSubscription) {
  setAlertTitle('Available with subscription only');
  setAlertMessage('Message translation is available only for users with subscription.');
  setAlertVisible(true);
  return;
}
```

### **–í–∞–∂–ª–∏–≤–æ:**

- ‚úÖ **–õ—ñ—á–∏–ª—å–Ω–∏–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å** - –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ë–î
- ‚úÖ **–ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ –Ω–µ –∑'—è–≤–ª—è—é—Ç—å—Å—è** - –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–Ω—è—Ç–æ
- ‚úÖ **–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–æ—Å—Ç—É–ø–Ω—ñ** - –º–æ–∂–Ω–∞ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é
- ‚ö†Ô∏è **–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è** –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ:**

–ü—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ñ—É–Ω–∫—Ü—ñ–π, –ø–æ–≤–µ—Ä–Ω—ñ—Ç—å –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å—ñ—ó. 