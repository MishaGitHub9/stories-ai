# üõí –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è In-App Purchases

## üìã –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–ø–ª–∞—Ç–∏

### 1. **App Store Connect –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**

#### 1.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—É –≤ App Store Connect:
1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ [App Store Connect](https://appstoreconnect.apple.com)
2. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ —Ä–æ–∑–¥—ñ–ª **"Features"** ‚Üí **"In-App Purchases"**
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"+"** –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É

#### 1.2 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏:
```
Product ID: com.mihadev.story.ai.premium.monthly
Type: Auto-Renewable Subscription
Reference Name: Monthly Premium
Subscription Group: Premium Subscriptions
```

#### 1.3 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ü—ñ–Ω:
- **Base Price**: $9.99 USD
- **Subscription Duration**: 1 Month
- **Free Trial**: 3 Days (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

#### 1.4 –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è:
- **Display Name**: "Monthly Premium"
- **Description**: "Unlimited stories and messages with translation features"

### 2. **–ö–æ–¥ –¥–æ–¥–∞—Ç–∫—É**

#### 2.1 –ü—Ä–æ–¥—É–∫—Ç ID –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π:
```typescript
// config/inAppPurchases.ts
export const PRODUCT_IDS = {
  PREMIUM_MONTHLY: 'com.mihadev.story.ai.premium.monthly',
} as const;
```

#### 2.2 –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –≤–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞:
- ‚úÖ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ –ø—ñ–¥–ø–∏—Å–∫–∏
- ‚úÖ –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### 3. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**

#### 3.1 Sandbox —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ App Store Connect
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ EAS Build –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É
3. –£–≤—ñ–π–¥—ñ—Ç—å –∑ —Ç–µ—Å—Ç–æ–≤–∏–º –∞–∫–∞—É–Ω—Ç–æ–º –Ω–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó

#### 3.2 –¢–µ—Å—Ç–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:
- –ü–æ–∫—É–ø–∫–∞ –ø—ñ–¥–ø–∏—Å–∫–∏
- –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∫—É–ø–æ–∫
- –°–∫–∞—Å—É–≤–∞–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–º—ñ—Ç—ñ–≤

### 4. **–ë–µ–∑–ø–µ–∫–∞**

#### 4.1 –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):
```typescript
// –ü—Ä–∏–∫–ª–∞–¥ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó receipt –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
const validateReceipt = async (receiptData: string) => {
  const response = await fetch('https://buy.itunes.apple.com/verifyReceipt', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      'receipt-data': receiptData,
      'password': 'your-app-shared-secret'
    })
  });
  
  return response.json();
};
```

#### 4.2 App Shared Secret:
1. –í App Store Connect –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **"App Information"**
2. –ó–Ω–∞–π–¥—ñ—Ç—å **"App-Specific Shared Secret"**
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

### 5. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**

#### 5.1 App Store Connect Analytics:
- –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –ø—Ä–æ–¥–∞–∂—ñ –≤ **"Sales and Trends"**
- –ê–Ω–∞–ª—ñ–∑—É–π—Ç–µ –∫–æ–Ω–≤–µ—Ä—Å—ñ—é –≤ **"Subscriptions"**
- –í—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è

#### 5.2 –õ–æ–≥–∏ –≤ –¥–æ–¥–∞—Ç–∫—É:
```typescript
// –í—Å—ñ –ø–æ–∫—É–ø–∫–∏ –ª–æ–≥—É—é—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
console.log('Purchase initiated for:', productId);
console.log('Purchase completed:', purchaseData);
```

### 6. **–ü—É–±–ª—ñ–∫–∞—Ü—ñ—è**

#### 6.1 –ü–µ—Ä–µ–¥ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—î—é:
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –≤—Å—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é receipt
- ‚úÖ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ App Review Information
- ‚úÖ –ü—ñ–¥–≥–æ—Ç—É–π—Ç–µ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∏ –¥–ª—è App Review

#### 6.2 App Review:
- –î–æ–¥–∞—Ç–æ–∫ –ø–æ–≤–∏–Ω–µ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- –û—Å–æ–±–ª–∏–≤–æ —Ä–æ–∑–¥—ñ–ª –ø—Ä–æ In-App Purchases

### 7. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞**

#### 7.1 –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞:
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤ –ø—Ä–æ –ø–æ–∫—É–ø–∫–∏
- –ü—ñ–¥–≥–æ—Ç—É–π—Ç–µ FAQ –ø—Ä–æ –ø—ñ–¥–ø–∏—Å–∫–∏
- –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

#### 7.2 –¢–µ—Ö–Ω—ñ—á–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞:
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø–æ–º–∏–ª–æ–∫ –ø–æ–∫—É–ø–æ–∫
- –õ–æ–≥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ü–ª–∞–Ω –¥—ñ–π –ø—Ä–∏ –∑–±–æ—è—Ö

## üöÄ –ì–æ—Ç–æ–≤–æ –¥–æ –∑–∞–ø—É—Å–∫—É!

–°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ —ñ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è. –í—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ:

- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
- ‚úÖ UI –¥–ª—è –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –û–±—Ä–æ–±–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- ‚úÖ –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

–ó–∞–ª–∏—à–∏–ª–æ—Å—è —Ç—ñ–ª—å–∫–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –≤ App Store Connect —Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É! 